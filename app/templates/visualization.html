<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visualization View</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #wordCloud {
      width: 100%;
      height: 400px;
    }
    .summary-box, .fulltext-box {
      margin-top: 30px;
      padding: 20px;
      background-color: #f0f2f5;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .fulltext-box {
      max-height: 250px;
      overflow-y: auto;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #333;
    }
    .fulltext-box::-webkit-scrollbar {
      width: 8px;
    }
    .fulltext-box::-webkit-scrollbar-thumb {
      background: #c0c0c0;
      border-radius: 10px;
    }
    .fulltext-box::-webkit-scrollbar-thumb:hover {
      background: #a0a0a0;
    }
</style>
</head>
<body>
<div class="container mt-5">
  <h2 class="mb-4">Sentiment Analysis Visualization</h2>
  <div class="row">
    <!-- Donut Chart -->
    <div class="col-md-6">
      <canvas id="sentimentChart"></canvas>
    </div>

    <!-- Word Cloud -->
    <div class="col-md-6">
      <div id="wordCloud"></div>
    </div>
  </div>

  <!-- Full Text Display -->
  <div class="fulltext-box">
    <h5 class="mb-3">Full Text</h5>
    <p id="fullText">
      The rapid advancement of artificial intelligence is transforming every aspect of our daily lives.
      From voice assistants that help us schedule appointments to predictive algorithms that guide medical diagnoses,
      AI continues to provide new opportunities and challenges. While many people are optimistic about the benefits
      of automation, others are concerned about potential job losses and ethical implications.
      Nevertheless, investment in AI research has never been stronger, and governments around the world are racing
      to develop their own national strategies. The future is uncertain, but one thing is clear: artificial intelligence
      will shape the way we live, work, and connect with each other in profound ways.
    </p>
  </div>

  <!-- Summary Box -->
  <div class="summary-box">
    <h5>Summary</h5>
    <p>The sentiment analysis indicates a generally positive outlook in the submitted content. Key topics include technology, future, innovation, and environment.</p>
  </div>
</div>

<!-- Dependencies -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://unpkg.com/d3-cloud/build/d3.layout.cloud.js"></script>

<script>
// Donut chart data
const ctx = document.getElementById('sentimentChart').getContext('2d');
const sentimentChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Positive', 'Neutral', 'Negative'],
        datasets: [{
            data: [60, 30, 10],
            backgroundColor: ['#4caf50', '#ffc107', '#f44336']
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { position: 'bottom' },
            title: {
                display: true,
                text: 'Sentiment Score Breakdown'
            }
        }
    }
});

// Word Cloud Data
const words = [
  {text: "artificial intelligence", size: 40},
  {text: "AI", size: 35},
  {text: "automation", size: 30},
  {text: "future", size: 28},
  {text: "research", size: 26},
  {text: "challenges", size: 24},
  {text: "benefits", size: 22},
  {text: "strategy", size: 20},
  {text: "medical", size: 18},
  {text: "jobs", size: 16}
];

const width = document.getElementById('wordCloud').offsetWidth;
const height = 400;

d3.layout.cloud()
    .size([width, height])
    .words(words)
    .padding(5)
    .rotate(() => ~~(Math.random() * 2) * 90)
    .fontSize(d => d.size)
    .on("end", draw)
    .start();

function draw(words) {
  d3.select("#wordCloud")
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    .selectAll("text")
    .data(words)
    .enter().append("text")
    .style("font-size", d => d.size + "px")
    .style("fill", "#007bff")
    .attr("text-anchor", "middle")
    .attr("transform", d => "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")")
    .text(d => d.text);
}
</script>
</body>
</html>
